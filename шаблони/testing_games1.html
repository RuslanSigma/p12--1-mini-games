<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <link rel="stylesheet" href="~/css/game1.css">
<style>
    body {
    font-family: 'Arial', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    background-color: #faf8ef;
}

.game-container {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
}

#board {
    width: 400px;
    height: 400px;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: repeat(4, 1fr);
    gap: 10px;
    background-color: #00ff2a;
    padding: 10px;
    border-radius: 10px;
}
#bbada0
.tile {
    width: 100%;
    height: 100%;
    background-color: #cdc1b4;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    color: #776e65;
    border-radius: 5px;
}

    .tile[data-value="2"] {
        background-color: #eee4da;
        transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease;
    }

    .tile[data-value="4"] {
        background-color: #ede0c8;
        transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease;
    }

    .tile[data-value="8"] {
        background-color: #f2b179;
        color: #f9f6f2;
        transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease;
    }

    .tile[data-value="16"] {
        background-color: #f59563;
        color: #f9f6f2;
        transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease;
    }

    .tile[data-value="32"] {
        background-color: #f67c5f;
        color: #f9f6f2;
        transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease;
    }

    .tile[data-value="64"] {
        background-color: #f65e3b;
        color: #f9f6f2;
        transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease;
    }

    .tile[data-value="128"] {
        background-color: #edcf72;
        color: #f9f6f2;
        transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease;
    }

    .tile[data-value="256"] {
        background-color: #edcc61;
        color: #f9f6f2;
        transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease;
    }

    .tile[data-value="512"] {
        background-color: #edc850;
        color: #f9f6f2;
        transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease;
    }

    .tile[data-value="1024"] {
        background-color: #edc53f;
        color: #f9f6f2;
        transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease;
    }

    .tile[data-value="2048"] {
        background-color: #edc22e;
        color: #f9f6f2;
        transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease;
    }

    .tile.move[data-value="2"] {
        transition: transform 0.8s ease;
    }

        .tile.move[data-value="2"].move-right {
            transform: translateX(30px);
        }

        .tile.move[data-value="2"].move-left {
            transform: translateX(-40px);
        }

        .tile.move[data-value="2"].move-up {
            transform: translateY(-40px);
        }

        .tile.move[data-value="2"].move-down {
            transform: translateY(40px);
        }

    .tile.move[data-value="4"].move-right {
        transform: translateX(35px);
    }

    .tile.move[data-value="4"].move-left {
        transform: translateX(-35px);
    }

    .tile.move[data-value="4"].move-up {
        transform: translateY(-35px);
    }

    .tile.move[data-value="4"].move-down {
        transform: translateY(35px);
    }

    .tile.move[data-value="8"].move-right {
        transform: translateX(40px);
    }

    .tile.move[data-value="8"].move-left {
        transform: translateX(-30px);
    }

    .tile.move[data-value="8"].move-up {
        transform: translateY(-30px);
    }

    .tile.move[data-value="8"].move-down {
        transform: translateY(30px);
    }

    .tile.move[data-value="16"].move-right {
        transform: translateX(45px);
    }

    .tile.move[data-value="16"].move-left {
        transform: translateX(-25px);
    }

    .tile.move[data-value="16"].move-up {
        transform: translateY(-25px);
    }

    .tile.move[data-value="16"].move-down {
        transform: translateY(25px);
    }

    .tile.move[data-value="32"].move-right {
        transform: translateX(50px);
    }

    .tile.move[data-value="32"].move-left {
        transform: translateX(-20px);
    }

    .tile.move[data-value="32"].move-up {
        transform: translateY(-20px);
    }

    .tile.move[data-value="32"].move-down {
        transform: translateY(20px);
    }

    .tile.move[data-value="64"].move-right {
        transform: translateX(55px);
    }

    .tile.move[data-value="64"].move-left {
        transform: translateX(-15px);
    }

    .tile.move[data-value="64"].move-up {
        transform: translateY(-15px);
    }

    .tile.move[data-value="64"].move-down {
        transform: translateY(15px);
    }

    .tile.move[data-value="128"].move-right {
        transform: translateX(60px);
    }

    .tile.move[data-value="128"].move-left {
        transform: translateX(-10px);
    }

    .tile.move[data-value="128"].move-up {
        transform: translateY(-10px);
    }

    .tile.move[data-value="128"].move-down {
        transform: translateY(10px);
    }

    .tile.move[data-value="256"].move-right {
        transform: translateX(65px);
    }

    .tile.move[data-value="256"].move-left {
        transform: translateX(-5px);
    }

    .tile.move[data-value="256"].move-up {
        transform: translateY(-5px);
    }

    .tile.move[data-value="256"].move-down {
        transform: translateY(5px);
    }

    .tile.move[data-value="512"].move-right {
        transform: translateX(70px);
    }

    .tile.move[data-value="512"].move-left {
        transform: translateX(0px);
    }

    .tile.move[data-value="512"].move-up {
        transform: translateY(0px);
    }

    .tile.move[data-value="512"].move-down {
        transform: translateY(0px);
    }

    .tile.move[data-value="1024"].move-right {
        transform: translateX(75px);
    }

    .tile.move[data-value="1024"].move-left {
        transform: translateX(5px);
    }

    .tile.move[data-value="1024"].move-up {
        transform: translateY(5px);
    }

    .tile.move[data-value="1024"].move-down {
        transform: translateY(-5px);
    }

    .tile.move[data-value="2048"].move-right {
        transform: translateX(80px);
    }

    .tile.move[data-value="2048"].move-left {
        transform: translateX(10px);
    }

    .tile.move[data-value="2048"].move-up {
        transform: translateY(10px);
    }

    .tile.move[data-value="2048"].move-down {
        transform: translateY(-10px);
    }

</style>
    <div class="game-container">
        <div id="board">
        </div>
    </div>
    <script src="script.js"></script>
    <script>
        const boardSize = 4;
        let board = [];

        function createBoard() {
            board = [];
            for (let i = 0; i < boardSize; i++) {
                board.push(Array(boardSize).fill(0));
            }
            addNewTile();
            addNewTile();
            updateBoard();
        }

        function addNewTile() {
            let emptyTiles = [];
            for (let row = 0; row < boardSize; row++) {
                for (let col = 0; col < boardSize; col++) {
                    if (board[row][col] === 0) {
                        emptyTiles.push({ row, col });
                    }
                }
            }

            if (emptyTiles.length > 0) {
                let { row, col } = emptyTiles[Math.floor(Math.random() * emptyTiles.length)];
                board[row][col] = Math.random() < 0.9 ? 2 : 4;
                updateBoard();
            }
        }

        function updateBoard() {
            const boardElement = document.getElementById('board');
            boardElement.innerHTML = '';
            for (let row = 0; row < boardSize; row++) {
                for (let col = 0; col < boardSize; col++) {
                    const tileValue = board[row][col];
                    const tileElement = document.createElement('div');
                    tileElement.classList.add('tile');
                    tileElement.dataset.value = tileValue;
                    tileElement.textContent = tileValue > 0 ? tileValue : '';
                    boardElement.appendChild(tileElement);
                }
            }
        }

        function slideRowLeft(row) {
            let arr = row.filter(val => val);
            let missing = boardSize - arr.length;
            let zeros = Array(missing).fill(0);
            arr = arr.concat(zeros);

            for (let i = 0; i < boardSize - 1; i++) {
                if (arr[i] === arr[i + 1] && arr[i] !== 0) {
                    arr[i] *= 2;
                    arr[i + 1] = 0;
                }
            }

            arr = arr.filter(val => val);
            missing = boardSize - arr.length;
            zeros = Array(missing).fill(0);
            arr = arr.concat(zeros);

            return arr;
        }

        function slideLeft() {
            const tiles = document.querySelectorAll('.tile');
            tiles.forEach(tile => tile.classList.remove('move', 'move-right', 'move-left', 'move-up', 'move-down'));

            for (let i = 0; i < boardSize; i++) {
                board[i] = slideRowLeft(board[i]);
            }
            addNewTile();
            updateBoard();
        }

        function rotateBoard() {
            let newBoard = [];
            for (let col = 0; col < boardSize; col++) {
                newBoard.push([]);
                for (let row = boardSize - 1; row >= 0; row--) {
                    newBoard[col].push(board[row][col]);
                }
            }
            board = newBoard;
        }

        function slideRight() {
            rotateBoard();
            rotateBoard();
            slideLeft();
            rotateBoard();
            rotateBoard();
            updateBoard();
        }

        function slideUp() {
            rotateBoard();
            rotateBoard();
            rotateBoard();
            slideLeft();
            rotateBoard();
            updateBoard();
        }

        function slideDown() {
            rotateBoard();
            slideLeft();
            rotateBoard();
            rotateBoard();
            rotateBoard();
            updateBoard();
        }

        function applyTileAnimations(direction) {
            const tiles = document.querySelectorAll('.tile');
            tiles.forEach(tile => {
                tile.classList.add('move', `move-${direction}`);
            });

            setTimeout(() => {
                tiles.forEach(tile => {
                    tile.classList.remove('move', `move-${direction}`);
                });
            }, 200);
        }

        document.addEventListener('keydown', event => {
            switch (event.key) {
                case 'ArrowLeft':
                    slideLeft();
                    applyTileAnimations('left');
                    break;
                case 'ArrowRight':
                    slideRight();
                    applyTileAnimations('right');
                    break;
                case 'ArrowUp':
                    slideUp();
                    applyTileAnimations('up');
                    break;
                case 'ArrowDown':
                    slideDown();
                    applyTileAnimations('down');
                    break;
            }
            if (checkGameOver()) {
                alert('Game Over!');
            }
        });

        function checkGameOver() {
            for (let row = 0; row < boardSize; row++) {
                for (let col = 0; col < boardSize; col++) {
                    if (board[row][col] === 0) return false;
                    if (col !== boardSize - 1 && board[row][col] === board[row][col + 1]) return false;
                    if (row !== boardSize - 1 && board[row][col] === board[row + 1][col]) return false;
                }
            }
            return true;
        }

        createBoard();
    </script>

</body>
</html>